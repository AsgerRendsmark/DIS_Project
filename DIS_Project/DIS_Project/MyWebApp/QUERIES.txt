REMOVE DUPLICATE

DELETE FROM favorites                                                    
 WHERE (user_id, stock_id) IN (                                                    
    SELECT user_id, stock_id                                                        
    FROM (                                                                            
        SELECT user_id, stock_id                                                        
        FROM favorites                                                                  
        GROUP BY user_id, stock_id                                                      
        HAVING COUNT(*) > 1                                                           
        ) as duplicates                                                               
        );
DELETE FROM favorites  
                                                
WHERE (user_id, stock_id) IN (SELECT user_id, stock_id                                                        FROM (                                                                            SELECT user_id, stock_id                                                        FROM favorites                                                                  GROUP BY user_id, stock_id                                                      HAVING COUNT(*) > 1                                                           ) as duplicates                                                               );


DELETE FROM stock_history                                                    
 WHERE (stock_id) IN (                                                    
    SELECT  stock_id                                                        
    FROM (                                                                            
        SELECT stock_id                                                        
        FROM stock_history                                                                  
        GROUP BY stock_id                                                      
        HAVING COUNT(*) > 1                                                           
        ) as duplicates                                                               
        );
DELETE FROM favorites  
                                                
WHERE (user_id, stock_id) IN (SELECT user_id, stock_id                                                        FROM (                                                                            SELECT user_id, stock_id                                                        FROM favorites                                                                  GROUP BY user_id, stock_id                                                      HAVING COUNT(*) > 1                                                           ) as duplicates                                                               );
